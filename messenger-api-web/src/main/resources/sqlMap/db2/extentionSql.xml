<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- PUSH receiver sqlMap_ORACLE -->
<mapper namespace="sendmsg">

    <insert id="inPushMsgRecvMaster" parameterType="kr.msp.push.receiver.daemon.model.PushMsgBean">
        <selectKey keyProperty="SEQNO" resultType="Integer" order="BEFORE">
            SELECT SEQ_T_PUSH_MSG_RECV_MASTER.NEXTVAL  FROM DUAL
        </selectKey>
        <![CDATA[
        insert into T_PUSH_MSG_RECV_MASTER(SOUNDFILE,BADGENO,MESSAGE,EXT,RESERVEDATE,PRIORITY,SENDERID,
        REGDATE,APPID,SERVICECODE,TYPE,TOTAL_SEND_CNT,SEND_CNT,FAIL_CNT,REV_CNT,READ_CNT,RESERVE_SEQNO,DB_IN)values(
        #{SOUNDFILE},#{BADGENO},#{MESSAGE},#{EXT},TO_DATE(#{RESERVEDATE}, 'YYYYMMDDhh24miss'),#{PRIORITY},#{SENDERCODE},
        SYSDATE,#{APP_ID},#{SERVICECODE},#{TYPE},#{TOTAL_SEND_CNT},0,0,0,0,#{RESERVE_SEQNO},#{DB_IN})
        ]]>
    </insert>

    <insert id="inPushSystemMsgRecvMaster" parameterType="kr.msp.push.receiver.daemon.model.PushMsgBean">
        <selectKey keyProperty="SEQNO" resultType="Integer" order="BEFORE">
            SELECT SEQ_T_PUSH_MSG_RECV_MASTER.NEXTVAL  FROM DUAL
        </selectKey>
        <![CDATA[
        insert into T_PUSH_MSG_RECV_MASTER(SEQNO,SOUNDFILE,BADGENO,MESSAGE,EXT,RESERVEDATE,PRIORITY,SENDERID,
        REGDATE,APPID,SERVICECODE,TYPE,TOTAL_SEND_CNT,SEND_CNT,FAIL_CNT,REV_CNT,READ_CNT,UPNS_CNT,APNS_CNT,GCM_CNT,RESERVE_SEQNO,DB_IN)values(
        #{SEQNO},#{SOUNDFILE},#{BADGENO},#{MESSAGE},#{EXT},TO_DATE(#{RESERVEDATE},'YYYYMMDDhh24miss'),#{PRIORITY},#{SENDERCODE},
        SYSDATE,#{APP_ID},#{SERVICECODE},#{TYPE},#{TOTAL_SEND_CNT},#{SENT_CNT},0,0,0,#{UPNS_CNT},#{APNS_CNT},#{GCM_CNT},#{RESERVE_SEQNO},#{DB_IN})
        ]]>
    </insert>

    <select id="getPushUserList" parameterType="hashmap" resultType="kr.msp.push.receiver.daemon.model.BasicPushUserBean">
        <![CDATA[
        SELECT USERSEQNO,PUSHKEY,PSID,PNSID,DEVICEID,CUID,CNAME,APPID,PHONENO from T_PUSH_USER_INFO
        ]]>
    </select>

    <select id="getPushGroupUserList" parameterType="hashmap" resultType="kr.msp.push.receiver.daemon.model.PushUserBean">
        <![CDATA[
        select A.USERSEQNO, A.PUSHKEY, A.PSID, A.PNSID, A.DEVICEID, A.CUID, A.CNAME, A.APPID, A.PHONENO, A.APNS_MODE, A.UPNSID
        from T_PUSH_USER_INFO A, T_PUSH_USER_GROUP E
        where E.GROUPSEQ=#{GROUPSEQ}
        and A.CUID=E.CUID
        ]]>
    </select>

    <select id="getPushService" parameterType="java.lang.String" resultType="hashmap">
        <![CDATA[
        select PNSID,MAXRETRYCNT,RETRYFLAG,RESENDFLAG,FAILSMSFLAG from T_PUSH_SERVICE where SERVICECODE=#{SERVICECODE}
        ]]>
    </select>

    <select id="getAllPushService" parameterType="java.lang.String" resultType="hashmap">
        <![CDATA[
        select * from T_PUSH_SERVICE
        ]]>
    </select>

    <insert id="inPushSent" parameterType="kr.msp.push.receiver.daemon.model.ReadMsgBean">
        <![CDATA[
        insert into T_PUSH_SUCCESS(PSID, SEQNO, APPID, PNSID, STATUS, CUID, REGDATE)
        values(#{PSID},#{SEQNO},#{APP_ID},#{PNSID},#{STATUS_KIND},#{CUID},SYSDATE)
        ]]>
    </insert>

    <insert id="inUpnsPushSent" parameterType="hashmap">
        <![CDATA[
        insert into T_PUSH_SUCCESS(PSID, SEQNO, APPID, PNSID, STATUS, CUID, REGDATE)
        values(#{PSID},#{SEQNO},#{APPID},#{PNSID},#{STATUS},#{CUID},SYSDATE)
        ]]>
    </insert>

    <insert id="inPushFail" parameterType="hashmap">
        <![CDATA[
        insert into T_PUSH_FAIL(PSID, SEQNO, CUID, APPID, PNSID, RETRYCNT, RESULTCODE, RESULTMSG, CSV_VARS,REGDATE, MODEDATE)
        values(#{PSID},#{SEQNO},#{CUID},#{APPID},#{PNSID},#{RETRYCNT},#{RESULTCODE},#{RESULTMSG},#{CSV_VARS},SYSDATE,SYSDATE)
        ]]>
    </insert>

    <update id="upSendInfo" parameterType="kr.msp.push.receiver.daemon.model.SendInfoBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set TOTAL_SEND_CNT=#{TOTAL_SEND_CNT},SEND_CNT=#{SEND_CNT}, FAIL_CNT=#{FAIL_CNT},UPNS_CNT=#{UPNS_CNT},APNS_CNT=#{APNS_CNT},GCM_CNT=#{GCM_CNT}
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <insert id="inReserve" parameterType="kr.msp.push.receiver.daemon.model.PushMsgBean">
        <selectKey keyProperty="RESERVE_SEQNO" resultType="Integer" order="BEFORE">
            SELECT SEQ_T_PUSH_RESERVE_MSG.NEXTVAL FROM DUAL
        </selectKey>
        <![CDATA[
        insert into T_PUSH_RESERVE_MSG(RESERVE_SEQNO,APP_ID,MESSAGE,SOUNDFILE,BADGENO,PRIORITY,EXT,SENDERCODE,SERVICECODE,RESERVEDATE,TYPE,DB_IN,ATTACHFILE,GROUPSEQ,CUID,REGDATE,PROCESS_FLAG,RESERVETYPE)
        values(#{RESERVE_SEQNO},#{APP_ID},#{MESSAGE},#{SOUNDFILE},#{BADGENO},#{PRIORITY},#{EXT},#{SENDERCODE},#{SERVICECODE},TO_DATE(#{RESERVEDATE}, 'YYYYMMDDhh24miss')
        ,#{TYPE},#{DB_IN},#{ATTACHFILE},#{GROUPSEQ},#{CUID},SYSDATE,'N','U')
        ]]>
    </insert>

    <delete id="delReserve" parameterType="java.lang.String">
        <![CDATA[
        delete from T_PUSH_RESERVE_MSG where RESERVE_SEQNO=#{RESERVE_SEQNO} and PROCESS_FLAG!='F'
        ]]>
    </delete>
    <!--관리자 강제 삭제-->
    <delete id="delForceReserve" parameterType="java.lang.String">
        <![CDATA[
        delete from T_PUSH_RESERVE_MSG where RESERVE_SEQNO=#{RESERVE_SEQNO}
        ]]>
    </delete>

    <update id="upReserveProcess" parameterType="hashmap">
        <![CDATA[
        update T_PUSH_RESERVE_MSG set PROCESS_FLAG=#{PROCESS_FLAG} where RESERVE_SEQNO=#{RESERVE_SEQNO}
        ]]>
    </update>

    <select id="selSendReserveMsg" parameterType="hashmap" resultType="kr.msp.push.receiver.daemon.model.PushMsgBean">
        <![CDATA[
        select RESERVE_SEQNO,APP_ID,MESSAGE,SOUNDFILE,BADGENO,PRIORITY,EXT,SENDERCODE,SERVICECODE,TO_CHAR(RESERVEDATE,'YYYYMMDDhh24miss') as RESERVEDATE,TYPE,DB_IN,ATTACHFILE,GROUPSEQ,CUID,REGDATE
        from T_PUSH_RESERVE_MSG
        where RESERVEDATE <= SYSDATE+INTERVAL '${SLEEPMIN}' MINUTE
        and RESERVETYPE!= 'A'
        and PROCESS_FLAG ='N'
        ]]>
    </select>

    <select id="selFirstSendReserveMsg" parameterType="hashmap" resultType="kr.msp.push.receiver.daemon.model.PushMsgBean">
        <![CDATA[
        select RESERVE_SEQNO,APP_ID,MESSAGE,SOUNDFILE,BADGENO,PRIORITY,EXT,SENDERCODE,SERVICECODE,TO_CHAR(RESERVEDATE,'YYYYMMDDhh24miss') as RESERVEDATE,TYPE,DB_IN,ATTACHFILE,GROUPSEQ,CUID,REGDATE
        from T_PUSH_RESERVE_MSG
        where RESERVEDATE <= SYSDATE+INTERVAL '${SLEEPMIN}' MINUTE
        and RESERVETYPE!= 'A'
        and (PROCESS_FLAG ='N' or PROCESS_FLAG ='R')
        ]]>
    </select>

    <update id="upReceiveSendMsg" parameterType="kr.msp.push.receiver.daemon.model.ReadMsgBean">
        <![CDATA[
        update T_PUSH_SUCCESS set STATUS=#{STATUS_KIND}, REVDATE=SYSDATE  where PSID=#{PSID} and SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="upReadSendMsg" parameterType="kr.msp.push.receiver.daemon.model.ReadMsgBean">
        <![CDATA[
        update T_PUSH_SUCCESS set STATUS=#{STATUS_KIND}, READDATE=SYSDATE where PSID=#{PSID} and SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="upMasterRevCnt" parameterType="kr.msp.push.receiver.daemon.model.ReadMsgBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set REV_CNT=REV_CNT+1
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="upMasterReadCnt" parameterType="kr.msp.push.receiver.daemon.model.ReadMsgBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set READ_CNT=READ_CNT+1
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <!--UPNS Fail 처리 쿼리-->
    <update id="inUpnsPushFail" parameterType="kr.msp.push.receiver.daemon.model.FailMsgBean">
        <![CDATA[
        insert into T_PUSH_FAIL(PSID, SEQNO, CUID, APPID, PNSID, RETRYCNT, RESULTCODE,CSV_VARS, RESULTMSG, REGDATE, MODEDATE)
        values(#{PSID},#{SEQNO},#{CUID},#{APPID},#{PNSID},#{RETRYCNT},#{RESULTCODE},#{CSV_VARS},#{RESULTMSG},SYSDATE,SYSDATE)
        ]]>
    </update>
    <!--UPNS Fail 마스터 테이블 처리 쿼리-->
    <update id="upUpnsFailMasterRevCnt" parameterType="kr.msp.push.receiver.daemon.model.FailMsgBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set SEND_CNT=SEND_CNT-1, FAIL_CNT=FAIL_CNT+1
        where SEQNO=#{SEQNO}
        ]]>
    </update>
    <!--GCM Fail 마스터 테이블 처리 쿼리-->
    <update id="upGCMFailMasterRevCnt" parameterType="kr.msp.push.receiver.daemon.model.FailMsgBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set FAIL_CNT=FAIL_CNT+1
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="upSysSentInfo" parameterType="kr.msp.push.receiver.daemon.model.SysSentInfoBean">
        <![CDATA[
        update T_PUSH_SYSMSG_SENTINFO
        SET SENT_CNT=SENT_CNT+#{SENT_CNT}
        ,FAIL_CNT=FAIL_CNT+#{FAIL_CNT}
        ,UPNS_SENT_CNT=UPNS_SENT_CNT+#{UPNS_SENT_CNT}
        ,APNS_SENT_CNT=APNS_SENT_CNT+#{APNS_SENT_CNT}
        ,GCM_SENT_CNT=GCM_SENT_CNT+#{GCM_SENT_CNT}
        ,TIME00=TIME00+#{TIME00}
        ,TIME01=TIME01+#{TIME01}
        ,TIME02=TIME02+#{TIME02}
        ,TIME03=TIME03+#{TIME03}
        ,TIME04=TIME04+#{TIME04}
        ,TIME05=TIME05+#{TIME05}
        ,TIME06=TIME06+#{TIME06}
        ,TIME07=TIME07+#{TIME07}
        ,TIME08=TIME08+#{TIME08}
        ,TIME09=TIME09+#{TIME09}
        ,TIME10=TIME10+#{TIME10}
        ,TIME11=TIME11+#{TIME11}
        ,TIME12=TIME12+#{TIME12}
        ,TIME13=TIME13+#{TIME13}
        ,TIME14=TIME14+#{TIME14}
        ,TIME15=TIME15+#{TIME15}
        ,TIME16=TIME16+#{TIME16}
        ,TIME17=TIME17+#{TIME17}
        ,TIME18=TIME18+#{TIME18}
        ,TIME19=TIME19+#{TIME19}
        ,TIME20=TIME20+#{TIME20}
        ,TIME21=TIME21+#{TIME21}
        ,TIME22=TIME22+#{TIME22}
        ,TIME23=TIME23+#{TIME23}
        where SENDDATE=#{SENDDATE} and SENDERCODE=#{SENDERCODE}
        ]]>
    </update>

    <insert id="inSysSentInfo" parameterType="kr.msp.push.receiver.daemon.model.SysSentInfoBean">
        <![CDATA[
        insert into T_PUSH_SYSMSG_SENTINFO(SENDDATE,SENDERCODE,SENT_CNT,FAIL_CNT,READ_CNT,UPNS_SENT_CNT,UPNS_FAIL_CNT,APNS_SENT_CNT,APNS_FAIL_CNT,GCM_SENT_CNT,GCM_FAIL_CNT
        ,TIME00,TIME01,TIME02,TIME03,TIME04,TIME05,TIME06,TIME07,TIME08,TIME09,TIME10
        ,TIME11,TIME12,TIME13,TIME14,TIME15,TIME16,TIME17,TIME18,TIME19,TIME20,TIME21,TIME22,TIME23)
        values(#{SENDDATE},#{SENDERCODE},#{SENT_CNT},#{FAIL_CNT},#{READ_CNT},#{UPNS_SENT_CNT},#{UPNS_FAIL_CNT},#{APNS_SENT_CNT},#{APNS_FAIL_CNT},#{GCM_SENT_CNT},#{GCM_FAIL_CNT}
        ,#{TIME00},#{TIME01},#{TIME02},#{TIME03},#{TIME04},#{TIME05}
        ,#{TIME06},#{TIME07},#{TIME08},#{TIME09},#{TIME10},#{TIME11},#{TIME12},#{TIME13},#{TIME14},#{TIME15},#{TIME16},#{TIME17},#{TIME18},#{TIME19},#{TIME20},#{TIME21},#{TIME22},#{TIME23})
        ]]>
    </insert>

    <update id="upFailSysSentInfo" parameterType="kr.msp.push.receiver.daemon.model.SysSentInfoBean">
        <![CDATA[
        update T_PUSH_SYSMSG_SENTINFO
        SET FAIL_CNT=FAIL_CNT+#{FAIL_CNT},UPNS_FAIL_CNT=UPNS_FAIL_CNT+#{UPNS_FAIL_CNT},APNS_FAIL_CNT=APNS_FAIL_CNT+#{APNS_FAIL_CNT},GCM_FAIL_CNT=GCM_FAIL_CNT+#{GCM_FAIL_CNT}
        where SENDDATE=#{SENDDATE} and SENDERCODE=#{SENDERCODE}
        ]]>
    </update>

    <update id="upReadSysSentInfo" parameterType="kr.msp.push.receiver.daemon.model.SysSentInfoBean">
        <![CDATA[
        update T_PUSH_SYSMSG_SENTINFO
        SET READ_CNT=READ_CNT+#{READ_CNT}
        where SENDDATE=#{SENDDATE} and SENDERCODE=#{SENDERCODE}
        ]]>
    </update>

    <insert id="inDBPushService" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        insert into T_PUSH_USER_INFO(PUSHKEY,PSID,PNSID,DEVICEID,CUID,CNAME,APPID,PHONENO,REGDATE,MODDATE,OS_VER,DEVICE_MD,APP_VER,UPNSID,APNS_MODE)
        values(#{PUSHKEY},#{PSID},#{PNSID},#{DEVICE_ID},#{CUID},#{CNAME},#{APP_ID},#{PHONENUM},SYSDATE,SYSDATE,#{OS_VER},#{DEVICE_MD},#{APP_VER},#{UPNSID},#{APNS_MODE})
        ]]>
    </insert>

    <delete id="delDBPushService" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        delete from T_PUSH_USER_INFO where PUSHKEY=#{PUSHKEY}
        ]]>
    </delete>

    <update id="upDBPushCuid" parameterType="kr.msp.push.receiver.model.PushServiceBean">
       	<if test="PHONENUM == ''">
		    update T_PUSH_USER_INFO set CUID=#{CUID},CNAME=#{CNAME},MODDATE=SYSDATE where PUSHKEY=#{PUSHKEY}
		</if>
		<if test="PHONENUM != ''">
		    update T_PUSH_USER_INFO set CUID=#{CUID},CNAME=#{CNAME},PHONENO=#{PHONENUM},MODDATE=SYSDATE where PUSHKEY=#{PUSHKEY}
		</if>
    </update>
	
    <update id="upDBPushGuestCuid" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        update T_PUSH_USER_INFO set CUID='GUEST',CNAME='GUEST',MODDATE=SYSDATE where CUID=#{CUID} AND APPID=#{APP_ID} AND PNSID=#{PNSID}
        ]]>
    </update>
    
    <update id="upDBPushDate" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        update T_PUSH_USER_INFO set MODDATE=SYSDATE where PUSHKEY=#{PUSHKEY}
        ]]>
    </update>
    
    <update id="upDBPushService" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        update T_PUSH_USER_INFO set MODDATE=SYSDATE,PSID=#{PSID},CUID=#{CUID},CNAME=#{CNAME},OS_VER=#{OS_VER},DEVICE_MD=#{DEVICE_MD},APP_VER=#{APP_VER} where PUSHKEY=#{PUSHKEY}
        ]]>
    </update>

    <select id="selPushuserInfo" parameterType="kr.msp.push.receiver.model.PushServiceBean" resultType="hashmap">
        <![CDATA[
        select * from T_PUSH_USER_INFO where PUSHKEY=#{PUSHKEY} FETCH FIRST 1 ROWS ONLY
        ]]>
    </select>

    <insert id="inDBUserGroupInfo" parameterType="hashmap">
        <![CDATA[
        insert into T_PUSH_USER_GROUP_INFO(GROUPSEQ,GROUPNAME,ISDELETED,REGDATE,MODDATE)
        values(S_PUSH_USER_GROUP_INFO.NEXTVAL,#{GROUPNAME},'N',SYSDATE,SYSDATE)
        ]]>
    </insert>
    <select id="selDBUserGroupInfo" parameterType="hashmap" resultType="hashmap">
        <![CDATA[
        select GROUPSEQ,GROUPNAME,REGDATE,MODDATE from T_PUSH_USER_GROUP_INFO
        ]]>
        <where>
            <if test="GROUPSEQ != null and GROUPSEQ !=''">
                GROUPSEQ = #{GROUPSEQ}
            </if>
        </where>
    </select>
    <delete id="delDBUserGroupInfo" parameterType="hashmap">
        <![CDATA[
        delete from T_PUSH_USER_GROUP_INFO where GROUPSEQ=#{GROUPSEQ}
        ]]>
    </delete>
     <delete id="delDBGroupUser" parameterType="hashmap">
        <![CDATA[
        delete from T_PUSH_USER_GROUP where GROUPSEQ=#{GROUPSEQ}
        ]]>
     </delete>
    <insert id="inPushGroupAddUser" parameterType="hashmap">
        <![CDATA[
        insert into T_PUSH_USER_GROUP(CUID,GROUPSEQ) values(#{CUID},#{GROUPSEQ})
        ]]>
    </insert>
    <select id="selDBUserGroupUserList" parameterType="hashmap" resultType="hashmap">
        <![CDATA[
        select * from T_PUSH_USER_GROUP where GROUPSEQ = #{GROUPSEQ}
        ]]>
    </select>
    <delete id="delPushGroupRemoveUser" parameterType="hashmap">
        <![CDATA[
        delete from T_PUSH_USER_GROUP where GROUPSEQ = #{GROUPSEQ} and CUID=#{CUID}
        ]]>
    </delete>
    <!-- ======================================== -->
    <!-- 접속 변수 관리                              -->
    <!-- ======================================== -->
    <select id="getCommConfiguration" parameterType="hashmap" resultType="hashmap">
        <![CDATA[
        SELECT VNAME, VVALUE
        FROM T_PUSH_VARIABLES
        WHERE VGROUP='UPNS'
	]]>
    </select>

    <update id="upAutosaveInit" parameterType="hashmap">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set SEND_CNT=TOTAL_SEND_CNT-${NOTSENDCNT} where SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="autoSaveEndUpSendInfo" parameterType="kr.msp.push.receiver.daemon.model.SendInfoBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set SEND_CNT=SEND_CNT+${SEND_CNT}, FAIL_CNT=FAIL_CNT+${FAIL_CNT}
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <select id="totalPushUserCnt" resultType="java.lang.Integer">
        <![CDATA[
        select count(PUSHKEY) as TOTAL_USER_CNT from T_PUSH_USER_INFO
        ]]>
    </select>

    <insert id="inDBPushMarketingUser" parameterType="kr.msp.push.receiver.model.PushServiceBean">
        <![CDATA[
        insert into T_PUSH_USER(CUID) values(#{CUID})
        ]]>
    </insert>

    <delete id="delDBPushMarketingUser" parameterType="java.lang.String">
        <![CDATA[
        delete from T_PUSH_USER where CUID=#{CUID}
        ]]>
    </delete>

    <update id="uplastLoopSendInfo" parameterType="kr.msp.push.receiver.daemon.model.SendInfoBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set TOTAL_SEND_CNT=#{TOTAL_SEND_CNT},UPNS_CNT=#{UPNS_CNT},APNS_CNT=#{APNS_CNT},GCM_CNT=#{GCM_CNT}
        where SEQNO=#{SEQNO}
        ]]>
    </update>

    <update id="upExceptionSendInfo" parameterType="kr.msp.push.receiver.daemon.model.SendInfoBean">
        <![CDATA[
        update T_PUSH_MSG_RECV_MASTER set TOTAL_SEND_CNT=#{TOTAL_SEND_CNT},SEND_CNT=${TOTAL_SEND_CNT}-FAIL_CNT,UPNS_CNT=#{UPNS_CNT},APNS_CNT=#{APNS_CNT},GCM_CNT=#{GCM_CNT}
        where SEQNO=#{SEQNO}
        ]]>
    </update>
</mapper>
